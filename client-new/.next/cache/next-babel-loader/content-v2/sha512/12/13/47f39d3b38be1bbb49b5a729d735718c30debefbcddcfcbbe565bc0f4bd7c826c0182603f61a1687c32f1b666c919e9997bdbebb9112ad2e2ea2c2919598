{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Users/hari/WebstormProjects/ecommerce-MERN/client-new/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/hari/WebstormProjects/ecommerce-MERN/client-new/src/components/product-grid/product-list/product-list.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { NetworkStatus } from 'apollo-client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/button';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nvar ErrorMessage = dynamic(_c = function _c() {\n  return import('components/error-message/error-message');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/error-message/error-message')];\n    },\n    modules: ['components/error-message/error-message']\n  }\n});\n_c2 = ErrorMessage;\nvar QuickView = dynamic(_c3 = function _c3() {\n  return import('features/quick-view/quick-view');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('features/quick-view/quick-view')];\n    },\n    modules: ['features/quick-view/quick-view']\n  }\n});\n_c4 = QuickView;\nvar GeneralCard = dynamic(_c5 = function _c5() {\n  return import('components/product-card/product-card-one/product-card-one');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-card/product-card-one/product-card-one')];\n    },\n    modules: ['components/product-card/product-card-one/product-card-one']\n  }\n});\n_c6 = GeneralCard;\nexport var Products = function Products(_ref) {\n  _s();\n\n  var deviceType = _ref.deviceType,\n      _ref$fetchLimit = _ref.fetchLimit,\n      fetchLimit = _ref$fetchLimit === void 0 ? 20 : _ref$fetchLimit,\n      _ref$loadMore = _ref.loadMore,\n      loadMore = _ref$loadMore === void 0 ? true : _ref$loadMore,\n      type = _ref.type;\n  var router = useRouter();\n\n  var _useQuery = useQuery(GET_PRODUCTS, {\n    variables: {\n      type: type,\n      text: router.query.text,\n      category: router.query.category,\n      offset: 0,\n      limit: fetchLimit\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading,\n      fetchMore = _useQuery.fetchMore,\n      networkStatus = _useQuery.networkStatus;\n\n  var loadingMore = networkStatus === NetworkStatus.fetchMore; // Quick View Modal\n\n  var handleModalClose = function handleModalClose() {\n    var pathname = router.pathname,\n        query = router.query,\n        asPath = router.asPath;\n    var as = asPath;\n    router.push({\n      pathname: pathname,\n      query: query\n    }, as, {\n      shallow: true\n    });\n    closeModal();\n  };\n\n  var handleQuickViewModal = function handleQuickViewModal(modalProps, deviceType, onModalClose) {\n    var pathname = router.pathname,\n        query = router.query;\n    var as = \"/product/\".concat(modalProps.slug);\n\n    if (pathname === '/product/[slug]') {\n      router.push(pathname, as);\n      return;\n    }\n\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: {\n        modalProps: modalProps,\n        deviceType: deviceType,\n        onModalClose: onModalClose\n      },\n      closeComponent: 'div',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 900,\n        y: 30,\n        height: 'auto',\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0\n        }\n      }\n    });\n    router.push({\n      pathname: pathname,\n      query: query\n    }, {\n      pathname: as\n    }, {\n      shallow: true\n    });\n  };\n\n  if (error) return /*#__PURE__*/_jsxDEV(ErrorMessage, {\n    message: error.message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 21\n  }, _this);\n\n  if (loading && !loadingMore) {\n    return /*#__PURE__*/_jsxDEV(LoaderWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, _this);\n  }\n\n  if (!data || !data.products || data.products.items.length === 0) {\n    return /*#__PURE__*/_jsxDEV(NoResultFound, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var handleLoadMore = function handleLoadMore() {\n    fetchMore({\n      variables: {\n        offset: Number(data.products.items.length),\n        limit: fetchLimit\n      },\n      updateQuery: function updateQuery(previousResult, _ref2) {\n        var fetchMoreResult = _ref2.fetchMoreResult;\n\n        if (!fetchMoreResult) {\n          return previousResult;\n        }\n\n        return {\n          products: {\n            __typename: previousResult.products.__typename,\n            items: [].concat(_toConsumableArray(previousResult.products.items), _toConsumableArray(fetchMoreResult.products.items)),\n            hasMore: fetchMoreResult.products.hasMore\n          }\n        };\n      }\n    });\n  };\n\n  var renderCard = function renderCard(productType, props) {\n    var _props$author;\n\n    switch (productType) {\n      case 'book':\n        return /*#__PURE__*/_jsxDEV(BookCard, {\n          title: props.title,\n          image: props.image,\n          name: props === null || props === void 0 ? void 0 : (_props$author = props.author) === null || _props$author === void 0 ? void 0 : _props$author.name,\n          data: props,\n          deviceType: deviceType,\n          onClick: function onClick() {\n            return router.push('/product/[slug]', \"/product/\".concat(props.slug));\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, _this);\n\n      case 'medicine':\n        return /*#__PURE__*/_jsxDEV(MedicineCard, {\n          title: props.title,\n          currency: CURRENCY,\n          image: props.image,\n          price: props.price,\n          weight: props.unit,\n          data: props\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, _this);\n\n      case 'furniture':\n        return /*#__PURE__*/_jsxDEV(FurnitureCard, {\n          title: props.title,\n          image: props.gallery[0].url,\n          discountInPercent: props.discountInPercent,\n          onClick: function onClick() {\n            return handleQuickViewModal(props, deviceType, handleModalClose);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, _this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(GeneralCard, {\n          title: props.title,\n          description: props.description,\n          image: props.image,\n          weight: props.unit,\n          currency: CURRENCY,\n          price: props.price,\n          salePrice: props.salePrice,\n          discountInPercent: props.discountInPercent,\n          data: props,\n          deviceType: deviceType,\n          onClick: function onClick() {\n            return handleQuickViewModal(props, deviceType, handleModalClose);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, _this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProductsRow, {\n      children: data.products.items.map(function (item, index) {\n        return /*#__PURE__*/_jsxDEV(ProductsCol, {\n          style: type === 'book' ? {\n            paddingLeft: 0,\n            paddingRight: 1\n          } : {},\n          children: /*#__PURE__*/_jsxDEV(ProductCardWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Fade, {\n              duration: 800,\n              delay: index * 10,\n              style: {\n                height: '100%'\n              },\n              children: renderCard(type, item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, _this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, _this), loadMore && data.products.hasMore && /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleLoadMore,\n        loading: loadingMore,\n        variant: \"secondary\",\n        style: {\n          fontSize: 14\n        },\n        border: \"1px solid #f1f1f1\",\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"loadMoreButton\",\n          defaultMessage: \"Load More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Products, \"sWONaJsNU2079eMgQXvoQgABhYc=\", false, function () {\n  return [useRouter, useQuery];\n});\n\n_c7 = Products;\nexport default Products;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"ErrorMessage$dynamic\");\n$RefreshReg$(_c2, \"ErrorMessage\");\n$RefreshReg$(_c3, \"QuickView$dynamic\");\n$RefreshReg$(_c4, \"QuickView\");\n$RefreshReg$(_c5, \"GeneralCard$dynamic\");\n$RefreshReg$(_c6, \"GeneralCard\");\n$RefreshReg$(_c7, \"Products\");","map":{"version":3,"sources":["/Users/hari/WebstormProjects/ecommerce-MERN/client-new/src/components/product-grid/product-list/product-list.tsx"],"names":["React","useRouter","dynamic","openModal","closeModal","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useQuery","NetworkStatus","Placeholder","Fade","NoResultFound","FormattedMessage","Button","GET_PRODUCTS","ErrorMessage","QuickView","GeneralCard","Products","deviceType","fetchLimit","loadMore","type","router","variables","text","query","category","offset","limit","notifyOnNetworkStatusChange","data","error","loading","fetchMore","networkStatus","loadingMore","handleModalClose","pathname","asPath","as","push","shallow","handleQuickViewModal","modalProps","onModalClose","slug","show","overlayClassName","closeOnClickOutside","component","componentProps","closeComponent","config","enableResizing","disableDragging","className","width","y","height","transition","mass","tension","friction","message","products","items","length","handleLoadMore","Number","updateQuery","previousResult","fetchMoreResult","__typename","hasMore","renderCard","productType","props","title","image","author","name","price","unit","gallery","url","discountInPercent","description","salePrice","map","item","index","paddingLeft","paddingRight","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { openModal, closeModal } from '@redq/reuse-modal';\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery } from '@apollo/react-hooks';\nimport { NetworkStatus } from 'apollo-client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/button';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nconst ErrorMessage = dynamic(() =>\n  import('components/error-message/error-message')\n);\nconst QuickView = dynamic(() => import('features/quick-view/quick-view'));\nconst GeneralCard = dynamic(\n  import('components/product-card/product-card-one/product-card-one')\n);\n\n\ntype ProductsProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  fetchLimit?: number;\n  loadMore?: boolean;\n  type?: string;\n};\nexport const Products: React.FC<ProductsProps> = ({\n  deviceType,\n  fetchLimit = 20,\n  loadMore = true,\n  type,\n}) => {\n  const router = useRouter();\n  const { data, error, loading, fetchMore, networkStatus } = useQuery(\n    GET_PRODUCTS,\n    {\n      variables: {\n        type: type,\n        text: router.query.text,\n        category: router.query.category,\n        offset: 0,\n        limit: fetchLimit,\n      },\n      notifyOnNetworkStatusChange: true,\n    }\n  );\n  const loadingMore = networkStatus === NetworkStatus.fetchMore;\n\n  // Quick View Modal\n  const handleModalClose = () => {\n    const { pathname, query, asPath } = router;\n    const as = asPath;\n    router.push(\n      {\n        pathname,\n        query,\n      },\n      as,\n      {\n        shallow: true,\n      }\n    );\n    closeModal();\n  };\n\n  const handleQuickViewModal = (\n    modalProps: any,\n    deviceType: any,\n    onModalClose: any\n  ) => {\n    const { pathname, query } = router;\n    const as = `/product/${modalProps.slug}`;\n    if (pathname === '/product/[slug]') {\n      router.push(pathname, as);\n      return;\n    }\n    openModal({\n      show: true,\n      overlayClassName: 'quick-view-overlay',\n      closeOnClickOutside: false,\n      component: QuickView,\n      componentProps: { modalProps, deviceType, onModalClose },\n      closeComponent: 'div',\n      config: {\n        enableResizing: false,\n        disableDragging: true,\n        className: 'quick-view-modal',\n        width: 900,\n        y: 30,\n        height: 'auto',\n        transition: {\n          mass: 1,\n          tension: 0,\n          friction: 0,\n        },\n      },\n    });\n    router.push(\n      {\n        pathname,\n        query,\n      },\n      {\n        pathname: as,\n      },\n      {\n        shallow: true,\n      }\n    );\n  };\n  if (error) return <ErrorMessage message={error.message} />;\n  if (loading && !loadingMore) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"1\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"2\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"3\" />\n        </LoaderItem>\n      </LoaderWrapper>\n    );\n  }\n\n  if (!data || !data.products || data.products.items.length === 0) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data.products.items.length),\n        limit: fetchLimit,\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        if (!fetchMoreResult) {\n          return previousResult;\n        }\n        return {\n          products: {\n            __typename: previousResult.products.__typename,\n            items: [\n              ...previousResult.products.items,\n              ...fetchMoreResult.products.items,\n            ],\n            hasMore: fetchMoreResult.products.hasMore,\n          },\n        };\n      },\n    });\n  };\n\n  const renderCard = (productType, props) => {\n    switch (productType) {\n      case 'book':\n        return (\n          <BookCard\n            title={props.title}\n            image={props.image}\n            name={props?.author?.name}\n            data={props}\n            deviceType={deviceType}\n            onClick={() =>\n              router.push('/product/[slug]', `/product/${props.slug}`)\n            }\n          />\n        );\n      case 'medicine':\n        return (\n          <MedicineCard\n            title={props.title}\n            currency={CURRENCY}\n            image={props.image}\n            price={props.price}\n            weight={props.unit}\n            data={props}\n          />\n        );\n      case 'furniture':\n        return (\n          <FurnitureCard\n            title={props.title}\n            image={props.gallery[0].url}\n            discountInPercent={props.discountInPercent}\n            onClick={() =>\n              handleQuickViewModal(props, deviceType, handleModalClose)\n            }\n          />\n        );\n      default:\n        return (\n          <GeneralCard\n            title={props.title}\n            description={props.description}\n            image={props.image}\n            weight={props.unit}\n            currency={CURRENCY}\n            price={props.price}\n            salePrice={props.salePrice}\n            discountInPercent={props.discountInPercent}\n            data={props}\n            deviceType={deviceType}\n            onClick={() =>\n              handleQuickViewModal(props, deviceType, handleModalClose)\n            }\n          />\n        );\n    }\n  };\n  return (\n    <>\n      <ProductsRow>\n        {data.products.items.map((item: any, index: number) => (\n          <ProductsCol\n            key={index}\n            style={type === 'book' ? { paddingLeft: 0, paddingRight: 1 } : {}}\n          >\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: '100%' }}\n              >\n                {renderCard(type, item)}\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data.products.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            loading={loadingMore}\n            variant=\"secondary\"\n            style={{\n              fontSize: 14,\n            }}\n            border=\"1px solid #f1f1f1\"\n          >\n            <FormattedMessage id=\"loadMoreButton\" defaultMessage=\"Load More\" />\n          </Button>\n        </ButtonWrapper>\n      )}\n    </>\n  );\n};\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}