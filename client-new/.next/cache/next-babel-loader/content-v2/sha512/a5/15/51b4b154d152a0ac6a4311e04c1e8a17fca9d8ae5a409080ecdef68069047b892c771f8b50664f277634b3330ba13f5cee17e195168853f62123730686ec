{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/2012b/WebstormProjects/ecommerce-MERN/client-new/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/2012b/WebstormProjects/ecommerce-MERN/client-new/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { GLOBAL, FORM, AUTH } from \"../defines\";\nimport axios from \"axios\";\nimport setAuthToken from \"../setAuthToken\";\nimport { API_BASE_URL } from \"@/utils/config\";\nimport { useRouter } from \"next/router\";\nexport var setGlobalCurrency = function setGlobalCurrency(cur) {\n  return {\n    type: GLOBAL.SET_CURRENCY,\n    cur: cur\n  };\n};\nexport var setGlobalCategory = function setGlobalCategory(category) {\n  return {\n    type: GLOBAL.SET_CATEGORY,\n    category: category\n  };\n};\nexport var setCurrentForm = function setCurrentForm(form) {\n  return {\n    type: FORM.SET_CURRENT_FORM,\n    form: form\n  };\n};\nexport var setGlobalSearch = function setGlobalSearch(keyword) {\n  return {\n    type: GLOBAL.SET_SEARCH,\n    keyword: keyword\n  };\n};\nexport var login = function login(email, password) {\n  return /*#__PURE__*/function () {\n    var _s = $RefreshSig$();\n\n    var _ref = _asyncToGenerator(_s( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var router, config, _yield$axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _s();\n\n              router = useRouter();\n              _context.prev = 2;\n              config = {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              };\n              _context.next = 6;\n              return axios.post(\"\".concat(API_BASE_URL, \"/api/v1/auth/login\"), {\n                email: email,\n                password: password\n              }, config);\n\n            case 6:\n              _yield$axios$post = _context.sent;\n              data = _yield$axios$post.data;\n              dispatch({\n                type: AUTH.LOG_IN,\n                payload: data\n              });\n              localStorage.setItem('userInfo', JSON.stringify(data));\n              localStorage.setItem('token', JSON.stringify(data.token));\n\n              if (!(window.location.pathname === '/login')) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 14;\n              return router.push('/');\n\n            case 14:\n              _context.next = 16;\n              return loadUser();\n\n            case 16:\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](2);\n              dispatch({\n                type: AUTH.LOG_IN_ERROR,\n                payload: _context.t0.response && _context.t0.response.data.message ? _context.t0.response.data.message : _context.t0.message\n              });\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 18]]);\n    }), \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n      return [useRouter];\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var logout = function logout() {\n  return function (dispatch) {\n    localStorage.removeItem('userInfo');\n    localStorage.removeItem('cartItems');\n    localStorage.removeItem('persist:root');\n    localStorage.removeItem('shippingAddress');\n    localStorage.removeItem('paymentMethod');\n    localStorage.removeItem('token');\n    dispatch({\n      type: AUTH.LOG_OUT\n    });\n    document.location.href = '/';\n  };\n};\nexport var loadUser = function loadUser() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var token, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (localStorage.token) {\n                token = localStorage.token.replaceAll('\"', ''); //sending token to headers\n\n                setAuthToken(token);\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.get(\"\".concat(API_BASE_URL, \"/api/v1/auth/me\"));\n\n            case 4:\n              res = _context2.sent;\n              dispatch({\n                type: AUTH.LOAD_USER,\n                payload: res.data\n              });\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              dispatch({\n                type: AUTH.LOAD_USER_FAIL,\n                payload: _context2.t0.response.data.error\n              });\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var createOrder = function createOrder(order) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var config, _yield$axios$post2, data, messages;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              config = {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              };\n              _context3.next = 4;\n              return axios.post(\"\".concat(API_BASE_URL, \"/api/orders\"), order, config);\n\n            case 4:\n              _yield$axios$post2 = _context3.sent;\n              data = _yield$axios$post2.data;\n              dispatch({\n                type: AUTH.ORDER_SUCCESS,\n                payload: data\n              });\n              localStorage.removeItem('cartItems');\n              localStorage.removeItem('persist:root');\n              _context3.next = 15;\n              break;\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](0);\n              messages = _context3.t0.response && _context3.t0.response.data.message ? _context3.t0.response.data.message : _context3.t0.message;\n\n              if (messages === 'Not authorized, token failed') {\n                dispatch(logout());\n              }\n\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 11]]);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport var register = function register(firstName, lastName, email, password, role) {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      var config, _yield$axios$post3, data;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              config = {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              };\n              _context4.next = 4;\n              return axios.post(\"\".concat(API_BASE_URL, \"/api/v1/auth/register\"), {\n                firstName: firstName,\n                lastName: lastName,\n                email: email,\n                password: password,\n                role: role\n              }, config);\n\n            case 4:\n              _yield$axios$post3 = _context4.sent;\n              data = _yield$axios$post3.data;\n              dispatch({\n                type: AUTH.SIGN_UP,\n                payload: data\n              });\n              _context4.next = 9;\n              return loadUser();\n\n            case 9:\n              localStorage.setItem('userInfo', JSON.stringify(data));\n              localStorage.setItem('token', JSON.stringify(data.token));\n              _context4.next = 17;\n              break;\n\n            case 13:\n              _context4.prev = 13;\n              _context4.t0 = _context4[\"catch\"](0);\n              _context4.t0.response && _context4.t0.response.data.message ? _context4.t0.response.data.message : _context4.t0.message;\n              dispatch({\n                type: AUTH.SIGN_UP_ERROR,\n                payload: _context4.t0.response && _context4.t0.response.data.message ? _context4.t0.response.data.message : _context4.t0.message\n              });\n\n            case 17:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 13]]);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["C:/Users/2012b/WebstormProjects/ecommerce-MERN/client-new/src/redux/actions/globalActions.ts"],"names":["GLOBAL","FORM","AUTH","axios","setAuthToken","API_BASE_URL","useRouter","setGlobalCurrency","cur","type","SET_CURRENCY","setGlobalCategory","category","SET_CATEGORY","setCurrentForm","form","SET_CURRENT_FORM","setGlobalSearch","keyword","SET_SEARCH","login","email","password","dispatch","router","config","headers","post","data","LOG_IN","payload","localStorage","setItem","JSON","stringify","token","window","location","pathname","push","loadUser","LOG_IN_ERROR","response","message","logout","removeItem","LOG_OUT","document","href","replaceAll","get","res","LOAD_USER","LOAD_USER_FAIL","error","createOrder","order","ORDER_SUCCESS","messages","register","firstName","lastName","role","SIGN_UP","SIGN_UP_ERROR"],"mappings":"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","sourcesContent":["import {GLOBAL, FORM, AUTH} from \"../defines\";\r\nimport axios from \"axios\";\r\nimport setAuthToken from \"../setAuthToken\";\r\nimport {API_BASE_URL} from \"@/utils/config\";\r\nimport {useRouter} from \"next/router\";\r\nexport const setGlobalCurrency = (cur:string) => ({\r\n    type: GLOBAL.SET_CURRENCY,\r\n    cur,\r\n});\r\n\r\nexport const setGlobalCategory = (category:string) => ({\r\n    type: GLOBAL.SET_CATEGORY,\r\n    category,\r\n});\r\nexport const setCurrentForm = (form:string) => ({\r\n    type: FORM.SET_CURRENT_FORM,\r\n    form,\r\n});\r\n\r\nexport const setGlobalSearch = (keyword:string) => ({\r\n    type: GLOBAL.SET_SEARCH,\r\n    keyword,\r\n});\r\n\r\n\r\nexport const login = (email:string, password:string) => async (dispatch:any) => {\r\n    const router=useRouter()\r\n    try {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }\r\n\r\n\r\n        const {data} = await axios.post(\r\n            `${API_BASE_URL}/api/v1/auth/login`,\r\n            {email, password},\r\n            config\r\n        )\r\n\r\n        dispatch({\r\n            type: AUTH.LOG_IN,\r\n            payload: data,\r\n        })\r\n        localStorage.setItem('userInfo', JSON.stringify(data))\r\n        localStorage.setItem('token', JSON.stringify(data.token))\r\n        if(window.location.pathname==='/login'){\r\n            await router.push('/')\r\n        }\r\n        await loadUser()\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type: AUTH.LOG_IN_ERROR,\r\n            payload:\r\n                error.response && error.response.data.message\r\n                    ? error.response.data.message\r\n                    : error.message,\r\n        })\r\n    }\r\n}\r\nexport const logout = () => (dispatch:any) => {\r\n    localStorage.removeItem('userInfo')\r\n    localStorage.removeItem('cartItems')\r\n    localStorage.removeItem('persist:root')\r\n    localStorage.removeItem('shippingAddress')\r\n    localStorage.removeItem('paymentMethod')\r\n    localStorage.removeItem('token')\r\n    dispatch({type: AUTH.LOG_OUT})\r\n    document.location.href = '/'\r\n}\r\nexport const loadUser = () => async (dispatch:any) => {\r\n    if (localStorage.token) {\r\n        const token=localStorage.token.replaceAll('\"','')\r\n        //sending token to headers\r\n        setAuthToken(token)\r\n    }\r\n    try {\r\n        const res = await axios.get(`${API_BASE_URL}/api/v1/auth/me`);\r\n        dispatch({\r\n            type: AUTH.LOAD_USER,\r\n            payload: res.data\r\n        })\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: AUTH.LOAD_USER_FAIL,\r\n            payload: err.response.data.error\r\n        })\r\n    }\r\n};\r\nexport const createOrder = (order:object) => async (dispatch:any) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n        }\r\n\r\n        const { data } = await axios.post(`${API_BASE_URL}/api/orders`, order, config)\r\n\r\n        dispatch({\r\n            type:AUTH.ORDER_SUCCESS,\r\n            payload: data,\r\n        })\r\n\r\n        localStorage.removeItem('cartItems')\r\n        localStorage.removeItem('persist:root')\r\n    } catch (error) {\r\n        const messages =\r\n            error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        if (messages === 'Not authorized, token failed') {\r\n            dispatch(logout())\r\n        }\r\n    }\r\n}\r\n\r\nexport const register = (firstName:string,lastName:string, email:string, password:string, role:any) => async (dispatch:any) => {\r\n    try {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }\r\n\r\n        const {data} = await axios.post(\r\n            `${API_BASE_URL}/api/v1/auth/register`,\r\n            {firstName,lastName, email, password, role},\r\n            config\r\n        )\r\n\r\n        dispatch({\r\n            type: AUTH.SIGN_UP,\r\n            payload: data,\r\n        })\r\n        await loadUser()\r\n\r\n        localStorage.setItem('userInfo', JSON.stringify(data))\r\n        localStorage.setItem('token', JSON.stringify(data.token))\r\n    } catch (error) {\r\n        error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message\r\n\r\n        dispatch({\r\n            type: AUTH.SIGN_UP_ERROR,\r\n\r\n            payload:\r\n                error.response && error.response.data.message\r\n                    ? error.response.data.message\r\n                    : error.message,\r\n        })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}