{"ast":null,"code":"import _defineProperty from \"/Users/hari/WebstormProjects/ecommerce-MERN/client-new/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/hari/WebstormProjects/ecommerce-MERN/client-new/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport { CART } from \"../defines\";\nvar initialState = [];\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var cartItem = state.find(function (item) {\n    return item.cartId === action.cartId;\n  });\n  var cartItemIndex = cartItem && state.indexOf(cartItem);\n\n  switch (action.type) {\n    case CART.ADD_TO_CART:\n      var addedCartItem = state.find(function (item) {\n        return item._id === action.product._id;\n      });\n      var addedCartItemIndex = addedCartItem && state.indexOf(addedCartItem);\n\n      if (!addedCartItem) {\n        return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n          cartQuantity: action.quantity || 1,\n          cartId: uuidv4()\n        })]);\n      } else {\n        return [].concat(_toConsumableArray(state.slice(0, addedCartItemIndex)), [_objectSpread(_objectSpread({}, addedCartItem), {}, {\n          cartQuantity: action.quantity ? addedCartItem.cartQuantity + action.quantity : addedCartItem.cartQuantity + 1\n        })], _toConsumableArray(state.slice(addedCartItemIndex + 1)));\n      }\n\n    case CART.REMOVE_FROM_CART:\n      return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), _toConsumableArray(state.slice(cartItemIndex + 1)));\n\n    case CART.REMOVE_ALL_FROM_CART:\n      return [];\n\n    case CART.INCREASE_QUANTITY_CART:\n      return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), [_objectSpread(_objectSpread({}, cartItem), {}, {\n        cartQuantity: cartItem.cartQuantity + 1\n      })], _toConsumableArray(state.slice(cartItemIndex + 1)));\n\n    case CART.DECREASE_QUANTITY_CART:\n      if (cartItem.cartQuantity === 1) {\n        return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), _toConsumableArray(state.slice(cartItemIndex + 1)));\n      }\n\n      if (cartItem.cartQuantity < 2) {\n        return;\n      }\n\n      return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), [_objectSpread(_objectSpread({}, cartItem), {}, {\n        cartQuantity: cartItem.cartQuantity - 1\n      })], _toConsumableArray(state.slice(cartItemIndex + 1)));\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/hari/WebstormProjects/ecommerce-MERN/client-new/src/redux/reducers/cartReducer.ts"],"names":["v4","uuidv4","CART","initialState","cartReducer","state","action","cartItem","find","item","cartId","cartItemIndex","indexOf","type","ADD_TO_CART","addedCartItem","_id","product","addedCartItemIndex","cartQuantity","quantity","slice","REMOVE_FROM_CART","REMOVE_ALL_FROM_CART","INCREASE_QUANTITY_CART","DECREASE_QUANTITY_CART"],"mappings":";;;;;;;AAAA,SAASA,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,IAAT,QAAqB,YAArB;AAEA,IAAMC,YAAuB,GAAG,EAAhC;AAEA,eAAe,SAASC,WAAT,GAAkE;AAAA,MAA7CC,KAA6C,uEAA1BF,YAA0B;AAAA,MAAZG,MAAY;AAC/E,MAAMC,QAAQ,GAAGF,KAAK,CAACG,IAAN,CAAW,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACC,MAAL,KAAgBJ,MAAM,CAACI,MAAjC;AAAA,GAAX,CAAjB;AACA,MAAMC,aAAa,GAAGJ,QAAQ,IAAIF,KAAK,CAACO,OAAN,CAAcL,QAAd,CAAlC;;AACA,UAAQD,MAAM,CAACO,IAAf;AACE,SAAKX,IAAI,CAACY,WAAV;AACI,UAAMC,aAAa,GAAGV,KAAK,CAACG,IAAN,CAClB,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACO,GAAL,KAAaV,MAAM,CAACW,OAAP,CAAeD,GAAtC;AAAA,OADkB,CAAtB;AAGA,UAAME,kBAAkB,GACpBH,aAAa,IAAIV,KAAK,CAACO,OAAN,CAAcG,aAAd,CADrB;;AAEA,UAAI,CAACA,aAAL,EAAoB;AAClB,4CACKV,KADL,oCAGOC,MAAM,CAACW,OAHd;AAIIE,UAAAA,YAAY,EAAEb,MAAM,CAACc,QAAP,IAAmB,CAJrC;AAKIV,UAAAA,MAAM,EAAET,MAAM;AALlB;AAQD,OATD,MASO;AACL,4CACKI,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeH,kBAAf,CADL,oCAGOH,aAHP;AAIII,UAAAA,YAAY,EAAEb,MAAM,CAACc,QAAP,GACRL,aAAa,CAACI,YAAd,GAA6Bb,MAAM,CAACc,QAD5B,GAERL,aAAa,CAACI,YAAd,GAA6B;AANvC,gCAQKd,KAAK,CAACgB,KAAN,CAAYH,kBAAkB,GAAG,CAAjC,CARL;AAUD;;AACL,SAAKhB,IAAI,CAACoB,gBAAV;AACE,0CACKjB,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADL,sBAEKN,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAFL;;AAIF,SAAKT,IAAI,CAACqB,oBAAV;AACE,aAAO,EAAP;;AACF,SAAKrB,IAAI,CAACsB,sBAAV;AACE,0CACKnB,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADL,oCAEOJ,QAFP;AAEiBY,QAAAA,YAAY,EAAEZ,QAAQ,CAACY,YAAT,GAAwB;AAFvD,8BAGKd,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAHL;;AAKF,SAAKT,IAAI,CAACuB,sBAAV;AACE,UAAGlB,QAAQ,CAACY,YAAT,KAAwB,CAA3B,EAA6B;AAC3B,4CACKd,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADL,sBAEKN,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAFL;AAID;;AACD,UAAIJ,QAAQ,CAACY,YAAT,GAAwB,CAA5B,EAA+B;AAC7B;AACD;;AACD,0CACKd,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADL,oCAEOJ,QAFP;AAEiBY,QAAAA,YAAY,EAAEZ,QAAQ,CAACY,YAAT,GAAwB;AAFvD,8BAGKd,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAHL;;AAKF;AACE,aAAON,KAAP;AAzDJ;AA2DD","sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport { CART } from \"../defines\";\n\nconst initialState:Array<any> = [];\n\nexport default function cartReducer(state:Array<any> = initialState, action:any) {\n  const cartItem = state.find((item) => item.cartId === action.cartId);\n  const cartItemIndex = cartItem && state.indexOf(cartItem);\n  switch (action.type) {\n    case CART.ADD_TO_CART:\n        const addedCartItem = state.find(\n            (item) => item._id === action.product._id\n        );\n        const addedCartItemIndex =\n            addedCartItem && state.indexOf(addedCartItem);\n        if (!addedCartItem) {\n          return [\n            ...state,\n            {\n              ...action.product,\n              cartQuantity: action.quantity || 1,\n              cartId: uuidv4(),\n            },\n          ];\n        } else {\n          return [\n            ...state.slice(0, addedCartItemIndex),\n            {\n              ...addedCartItem,\n              cartQuantity: action.quantity\n                  ? addedCartItem.cartQuantity + action.quantity\n                  : addedCartItem.cartQuantity + 1,\n            },\n            ...state.slice(addedCartItemIndex + 1),\n          ];\n        }\n    case CART.REMOVE_FROM_CART:\n      return [\n        ...state.slice(0, cartItemIndex),\n        ...state.slice(cartItemIndex + 1),\n      ];\n    case CART.REMOVE_ALL_FROM_CART:\n      return [];\n    case CART.INCREASE_QUANTITY_CART:\n      return [\n        ...state.slice(0, cartItemIndex),\n        { ...cartItem, cartQuantity: cartItem.cartQuantity + 1 },\n        ...state.slice(cartItemIndex + 1),\n      ];\n    case CART.DECREASE_QUANTITY_CART:\n      if(cartItem.cartQuantity===1){\n        return [\n          ...state.slice(0, cartItemIndex),\n          ...state.slice(cartItemIndex + 1),\n        ]\n      }\n      if (cartItem.cartQuantity < 2) {\n        return;\n      }\n      return [\n        ...state.slice(0, cartItemIndex),\n        { ...cartItem, cartQuantity: cartItem.cartQuantity - 1 },\n        ...state.slice(cartItemIndex + 1),\n      ];\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}