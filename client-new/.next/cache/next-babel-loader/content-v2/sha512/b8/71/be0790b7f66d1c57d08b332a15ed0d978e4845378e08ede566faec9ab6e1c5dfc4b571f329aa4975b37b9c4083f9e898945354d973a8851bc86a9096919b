{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport { CART } from \"../defines\";\nconst initialState = [];\nexport default function cartReducer(state = initialState, action) {\n  const cartItem = state.find(item => item.cartId === action.cartId);\n  const cartItemIndex = cartItem && state.indexOf(cartItem);\n\n  switch (action.type) {\n    case CART.ADD_TO_CART:\n      const addedCartItem = state.find(item => item._id === action.product._id);\n      const addedCartItemIndex = addedCartItem && state.indexOf(addedCartItem);\n\n      if (!addedCartItem) {\n        return [...state, _objectSpread(_objectSpread({}, action.product), {}, {\n          cartQuantity: action.quantity || 1,\n          cartId: uuidv4()\n        })];\n      } else {\n        return [...state.slice(0, addedCartItemIndex), _objectSpread(_objectSpread({}, addedCartItem), {}, {\n          cartQuantity: action.quantity ? addedCartItem.cartQuantity + action.quantity : addedCartItem.cartQuantity + 1\n        }), ...state.slice(addedCartItemIndex + 1)];\n      }\n\n    case CART.REMOVE_FROM_CART:\n      return [...state.slice(0, cartItemIndex), ...state.slice(cartItemIndex + 1)];\n\n    case CART.REMOVE_ALL_FROM_CART:\n      return [];\n\n    case CART.INCREASE_QUANTITY_CART:\n      return [...state.slice(0, cartItemIndex), _objectSpread(_objectSpread({}, cartItem), {}, {\n        cartQuantity: cartItem.cartQuantity + 1\n      }), ...state.slice(cartItemIndex + 1)];\n\n    case CART.DECREASE_QUANTITY_CART:\n      if (cartItem.cartQuantity < 2) {\n        return;\n      }\n\n      return [...state.slice(0, cartItemIndex), _objectSpread(_objectSpread({}, cartItem), {}, {\n        cartQuantity: cartItem.cartQuantity - 1\n      }), ...state.slice(cartItemIndex + 1)];\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/hari/WebstormProjects/ecommerce-MERN/client-new/src/redux/reducers/cartReducer.js"],"names":["v4","uuidv4","CART","initialState","cartReducer","state","action","cartItem","find","item","cartId","cartItemIndex","indexOf","type","ADD_TO_CART","addedCartItem","_id","product","addedCartItemIndex","cartQuantity","quantity","slice","REMOVE_FROM_CART","REMOVE_ALL_FROM_CART","INCREASE_QUANTITY_CART","DECREASE_QUANTITY_CART"],"mappings":";;;;;;AAAA,SAASA,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,IAAT,QAAqB,YAArB;AAEA,MAAMC,YAAY,GAAG,EAArB;AAEA,eAAe,SAASC,WAAT,CAAqBC,KAAK,GAAGF,YAA7B,EAA2CG,MAA3C,EAAmD;AAChE,QAAMC,QAAQ,GAAGF,KAAK,CAACG,IAAN,CAAYC,IAAD,IAAUA,IAAI,CAACC,MAAL,KAAgBJ,MAAM,CAACI,MAA5C,CAAjB;AACA,QAAMC,aAAa,GAAGJ,QAAQ,IAAIF,KAAK,CAACO,OAAN,CAAcL,QAAd,CAAlC;;AACA,UAAQD,MAAM,CAACO,IAAf;AACE,SAAKX,IAAI,CAACY,WAAV;AACI,YAAMC,aAAa,GAAGV,KAAK,CAACG,IAAN,CACjBC,IAAD,IAAUA,IAAI,CAACO,GAAL,KAAaV,MAAM,CAACW,OAAP,CAAeD,GADpB,CAAtB;AAGA,YAAME,kBAAkB,GACpBH,aAAa,IAAIV,KAAK,CAACO,OAAN,CAAcG,aAAd,CADrB;;AAEA,UAAI,CAACA,aAAL,EAAoB;AAClB,eAAO,CACL,GAAGV,KADE,kCAGAC,MAAM,CAACW,OAHP;AAIHE,UAAAA,YAAY,EAAEb,MAAM,CAACc,QAAP,IAAmB,CAJ9B;AAKHV,UAAAA,MAAM,EAAET,MAAM;AALX,WAAP;AAQD,OATD,MASO;AACL,eAAO,CACL,GAAGI,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeH,kBAAf,CADE,kCAGAH,aAHA;AAIHI,UAAAA,YAAY,EAAEb,MAAM,CAACc,QAAP,GACRL,aAAa,CAACI,YAAd,GAA6Bb,MAAM,CAACc,QAD5B,GAERL,aAAa,CAACI,YAAd,GAA6B;AANhC,YAQL,GAAGd,KAAK,CAACgB,KAAN,CAAYH,kBAAkB,GAAG,CAAjC,CARE,CAAP;AAUD;;AACL,SAAKhB,IAAI,CAACoB,gBAAV;AACE,aAAO,CACL,GAAGjB,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADE,EAEL,GAAGN,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAFE,CAAP;;AAIF,SAAKT,IAAI,CAACqB,oBAAV;AACE,aAAO,EAAP;;AACF,SAAKrB,IAAI,CAACsB,sBAAV;AACE,aAAO,CACL,GAAGnB,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADE,kCAEAJ,QAFA;AAEUY,QAAAA,YAAY,EAAEZ,QAAQ,CAACY,YAAT,GAAwB;AAFhD,UAGL,GAAGd,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAHE,CAAP;;AAKF,SAAKT,IAAI,CAACuB,sBAAV;AACE,UAAIlB,QAAQ,CAACY,YAAT,GAAwB,CAA5B,EAA+B;AAC7B;AACD;;AACD,aAAO,CACL,GAAGd,KAAK,CAACgB,KAAN,CAAY,CAAZ,EAAeV,aAAf,CADE,kCAEAJ,QAFA;AAEUY,QAAAA,YAAY,EAAEZ,QAAQ,CAACY,YAAT,GAAwB;AAFhD,UAGL,GAAGd,KAAK,CAACgB,KAAN,CAAYV,aAAa,GAAG,CAA5B,CAHE,CAAP;;AAKF;AACE,aAAON,KAAP;AAnDJ;AAqDD","sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport { CART } from \"../defines\";\n\nconst initialState = [];\n\nexport default function cartReducer(state = initialState, action) {\n  const cartItem = state.find((item) => item.cartId === action.cartId);\n  const cartItemIndex = cartItem && state.indexOf(cartItem);\n  switch (action.type) {\n    case CART.ADD_TO_CART:\n        const addedCartItem = state.find(\n            (item) => item._id === action.product._id\n        );\n        const addedCartItemIndex =\n            addedCartItem && state.indexOf(addedCartItem);\n        if (!addedCartItem) {\n          return [\n            ...state,\n            {\n              ...action.product,\n              cartQuantity: action.quantity || 1,\n              cartId: uuidv4(),\n            },\n          ];\n        } else {\n          return [\n            ...state.slice(0, addedCartItemIndex),\n            {\n              ...addedCartItem,\n              cartQuantity: action.quantity\n                  ? addedCartItem.cartQuantity + action.quantity\n                  : addedCartItem.cartQuantity + 1,\n            },\n            ...state.slice(addedCartItemIndex + 1),\n          ];\n        }\n    case CART.REMOVE_FROM_CART:\n      return [\n        ...state.slice(0, cartItemIndex),\n        ...state.slice(cartItemIndex + 1),\n      ];\n    case CART.REMOVE_ALL_FROM_CART:\n      return [];\n    case CART.INCREASE_QUANTITY_CART:\n      return [\n        ...state.slice(0, cartItemIndex),\n        { ...cartItem, cartQuantity: cartItem.cartQuantity + 1 },\n        ...state.slice(cartItemIndex + 1),\n      ];\n    case CART.DECREASE_QUANTITY_CART:\n      if (cartItem.cartQuantity < 2) {\n        return;\n      }\n      return [\n        ...state.slice(0, cartItemIndex),\n        { ...cartItem, cartQuantity: cartItem.cartQuantity - 1 },\n        ...state.slice(cartItemIndex + 1),\n      ];\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}